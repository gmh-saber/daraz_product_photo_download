<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Script Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .tab-active {
            background-color: #ffffff;
            color: #1e3a8a;
            border-color: #3b82f6;
        }
        .tab-inactive {
            background-color: #f0f3f8;
            color: #4b5563;
        }
        .tab-content {
            display: none;
        }
        .tab-content-active {
            display: block;
        }
        .code-block {
            background-color: #1f2937;
            color: #d1d5db;
            border-radius: 0.5rem;
            padding: 1.5rem;
            overflow-x: auto;
            position: relative;
        }
        .copy-button {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background-color: #4b5563;
            color: #ffffff;
            border: none;
            border-radius: 0.375rem;
            padding: 0.5rem 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .copy-button:hover {
            background-color: #6b7280;
        }
        .alert-box {
            background-color: #fffbeb;
            border-left: 4px solid #facc15;
            padding: 1rem;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-4xl">

        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-900">Image Link Extractor Scripts</h1>
            <p class="mt-2 text-lg text-gray-600">A guide to different browser console tools</p>
        </header>

        <main class="bg-white rounded-lg shadow-md p-6 sm:p-8">
            <nav class="mb-6 border-b border-gray-200">
                <ul class="flex flex-wrap -mb-px">
                    <li class="mr-2">
                        <button class="tab-btn inline-block p-4 border-b-2 rounded-t-lg font-semibold" data-tab="overview">
                            <span class="mr-2">ðŸ“„</span>Overview
                        </button>
                    </li>
                    <li class="mr-2">
                        <button class="tab-btn inline-block p-4 border-b-2 rounded-t-lg font-semibold" data-tab="usage">
                            <span class="mr-2">ðŸš€</span>Usage Guide
                        </button>
                    </li>
                    <li class="mr-2">
                        <button class="tab-btn inline-block p-4 border-b-2 rounded-t-lg font-semibold" data-tab="code">
                            <span class="mr-2">ðŸ’»</span>The Code
                        </button>
                    </li>
                </ul>
            </nav>

            <div id="tab-content-container">
                <section id="overview" class="tab-content space-y-6">
                    <p class="text-gray-700">This page provides two JavaScript snippets designed to be run in your web browser's developer console. Each script is tailored to extract and clean image links from a specific type of webpage, and then copies the resulting links to your clipboard for easy use.</p>

                    <h2 class="text-2xl font-semibold text-gray-800 pt-4 border-t">How It Works</h2>
                    <ol class="list-decimal list-inside space-y-3 text-gray-700">
                        <li><strong>Selects Image Elements:</strong> It targets `<img>` tags on the webpage that have specific CSS classes (`pdp-mod-common-image` and `item-gallery__thumbnail-image`) to focus only on relevant product gallery images.</li>
                        <li><strong>Extracts and Cleans Links:</strong> For each image, it grabs the `src` URL and removes a specific substring (`_120x120q80.jpg_.webp`) to get a link to the original, higher-resolution image.</li>
                        <li><strong>Logs to Console:</strong> All cleaned links are printed to the browser's console for review.</li>
                        <li><strong>Copies to Clipboard:</strong> The script automatically copies the list of cleaned links to your system's clipboard for easy pasting elsewhere.</li>
                    </ol>
                </section>

                <section id="usage" class="tab-content space-y-6">
                    <h2 class="text-2xl font-semibold text-gray-800">How to Use</h2>
                    <ol class="list-decimal list-inside space-y-4 text-gray-700">
                        <li>
                            <strong>Navigate to the Webpage:</strong> Open the webpage from which you want to extract image links in your browser.
                        </li>
                        <li>
                            <strong>Open Developer Tools:</strong>
                            <ul class="list-disc list-inside ml-4 mt-2 space-y-1">
                                <li><strong>Chrome/Firefox/Edge:</strong> Right-click anywhere and select "Inspect," then go to the "Console" tab.</li>
                                <li><strong>Safari:</strong> Enable the Develop menu (`Preferences > Advanced`), then select `Develop > Show JavaScript Console`.</li>
                            </ul>
                        </li>
                        <li>
                            <strong>Copy & Paste the Code:</strong> Go to "The Code" tab, select the script you need, copy it using the "Copy Code" button, and paste it into the console's input area.
                        </li>
                        <li>
                            <strong>Run the Script:</strong> Press `Enter`. The script will execute, showing logs in the console.
                        </li>
                    </ol>
                    <div class="alert-box mt-6">
                        <h3 class="font-bold text-yellow-800">Note on Functionality</h3>
                        <p class="text-yellow-700 mt-1">This script focuses on extracting and copying image links. It does not automatically download images due to browser security limitations that require user interaction for each download.</p>
                    </div>
                </section>

                <section id="code" class="tab-content">
                    <p class="text-gray-700 mb-6">Below are two versions of the image extractor script, each tailored for a different page structure. Select the one that matches the page you are on.</p>

                    <h3 class="text-xl font-semibold text-gray-800 mb-2">Script 1: For Product Thumbnails</h3>
                    <div class="code-block mb-8">
                        <button class="copy-button" data-target="code-snippet-v1">Copy Code</button>
                        <pre><code id="code-snippet-v1" class="language-javascript">
// This script targets image elements on the currently loaded webpage with specific class attributes.

// Select all img tags with specific classes for product thumbnails.
const imgElements = document.querySelectorAll('img.pdp-mod-common-image.item-gallery__thumbnail-image');

const cleanedSrcLinks = [];

// Iterate over each img element to extract and clean its src attribute.
imgElements.forEach(img => {
    let src = img.getAttribute('src');
    if (src) {
        // Define the specific substring to remove from the image URL.
        const substringToRemove = "_120x120q80.jpg_.webp";

        // Replace the substring if it exists to get the main image link.
        if (src.includes(substringToRemove)) {
            src = src.replace(substringToRemove, "");
        }
        cleanedSrcLinks.push(src);
    }
});

// Log the cleaned links to the console for verification.
console.log("Cleaned Image Source Links from Current Page:");
if (cleanedSrcLinks.length > 0) {
    cleanedSrcLinks.forEach(link => console.log(link));

    // --- Feature: Copy links to clipboard ---
    const linksToCopy = cleanedSrcLinks.join('\n');
    const tempTextArea = document.createElement('textarea');
    tempTextArea.value = linksToCopy;
    tempTextArea.style.position = 'fixed';
    tempTextArea.style.left = '-9999px';
    document.body.appendChild(tempTextArea);
    tempTextArea.focus();
    tempTextArea.select();
    try {
        const successful = document.execCommand('copy');
        const msg = successful ? 'successfully' : 'unsuccessfully';
        console.log(`Links copied to clipboard ${msg}!`);
    } catch (err) {
        console.error('Oops, unable to copy links to clipboard:', err);
        console.log('You can manually copy the links from the console output above.');
    } finally {
        document.body.removeChild(tempTextArea);
    }

} else {
    console.log("No matching image links found with the specified pattern.");
}
                        </code></pre>
                    </div>

                    <h3 class="text-xl font-semibold text-gray-800 mb-2 mt-8 border-t pt-8">Script 2: For Product Details</h3>
                    <div class="code-block">
                        <button class="copy-button" data-target="code-snippet-v2">Copy Code</button>
                        <pre><code id="code-snippet-v2" class="language-javascript">
// This script is now dynamic, allowing you to specify the container for the images.
// This makes it adaptable to different pages on the same website with similar structures.

// The CSS selector for the image container is now hard-coded to 'module_product_detail'.
// This removes the need for a user prompt.
const selector = '#module_product_detail';

// Select the main container for the product description using the provided selector.
const container = document.querySelector(selector);

if (container) {
    // Find all <img> tags within the container.
    const imgElements = container.querySelectorAll('img');
    const cleanedSrcLinks = [];

    // Define a regular expression to find and remove the dynamic part of the URL,
    // like "_2200x2200q80.jpg_.webp" or similar variations.
    // The regex is now updated to handle both .jpg and .png file extensions.
    const regexToRemove = /_\d+x\d+q\d+\.(jpg|png)_\.webp/g;

    // Iterate over each img element to extract and clean its src attribute.
    imgElements.forEach(img => {
        let src = img.getAttribute('src');
        if (src) {
            // Use the regular expression to replace the matched substring with an empty string.
            // This makes the script dynamic and adaptable to different image sizes/qualities.
            const cleanedSrc = src.replace(regexToRemove, "");
            cleanedSrcLinks.push(cleanedSrc);
        }
    });

    // Log the cleaned links to the console for verification.
    console.log("Cleaned Image Links from Product Details:");
    if (cleanedSrcLinks.length > 0) {
        cleanedSrcLinks.forEach(link => console.log(link));

        // --- Feature: Copy links to clipboard ---
        const linksToCopy = cleanedSrcLinks.join('\n');
        const tempTextArea = document.createElement('textarea');
        tempTextArea.value = linksToCopy;
        tempTextArea.style.position = 'fixed';
        tempTextArea.style.left = '-9999px';
        document.body.appendChild(tempTextArea);
        tempTextArea.focus();
        tempTextArea.select();
        try {
            const successful = document.execCommand('copy');
            const msg = successful ? 'successfully' : 'unsuccessfully';
            console.log(`Links copied to clipboard ${msg}!`);
        } catch (err) {
            console.error('Oops, unable to copy links to clipboard:', err);
            console.log('You can manually copy the links from the console output above.');
        } finally {
            document.body.removeChild(tempTextArea);
        }

    } else {
        console.log("No matching image links found with the specified pattern.");
    }

} else {
    console.log(`Could not find the '${selector}' container on this page.`);
}
                        </code></pre>
                    </div>

                </section>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const tabs = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');
            const copyButtons = document.querySelectorAll('.copy-button');

            function switchTab(tab) {
                tabs.forEach(t => {
                    t.classList.remove('tab-active');
                    t.classList.add('tab-inactive');
                    t.setAttribute('aria-selected', 'false');
                });
                tab.classList.add('tab-active');
                tab.classList.remove('tab-inactive');
                tab.setAttribute('aria-selected', 'true');

                tabContents.forEach(content => {
                    content.classList.remove('tab-content-active');
                });

                const activeTabContent = document.getElementById(tab.dataset.tab);
                if (activeTabContent) {
                    activeTabContent.classList.add('tab-content-active');
                }
            }

            tabs.forEach(tab => {
                tab.addEventListener('click', () => switchTab(tab));
            });

            copyButtons.forEach(copyBtn => {
                copyBtn.addEventListener('click', () => {
                    const targetId = copyBtn.dataset.target;
                    const codeSnippetElement = document.getElementById(targetId);

                    if (codeSnippetElement) {
                        // Use textContent instead of innerText for a more accurate copy of the code,
                        // which avoids the syntax error you were seeing.
                        const codeText = codeSnippetElement.textContent;

                        const tempTextArea = document.createElement('textarea');
                        tempTextArea.value = codeText;
                        document.body.appendChild(tempTextArea);
                        tempTextArea.select();
                        document.execCommand('copy');
                        document.body.removeChild(tempTextArea);

                        copyBtn.innerText = 'Copied!';
                        setTimeout(() => {
                            copyBtn.innerText = 'Copy Code';
                        }, 2000);
                    }
                });
            });

            // Set the first tab as active by default
            if (tabs.length > 0) {
                switchTab(tabs[0]);
            }
        });
    </script>
</body>
</html>
