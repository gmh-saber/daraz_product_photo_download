<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Script Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .tab-active {
            background-color: #ffffff;
            color: #1e3a8a;
            border-color: #3b82f6;
        }
        .tab-inactive {
            background-color: #f0f3f8;
            color: #4b5563;
        }
        .tab-content {
            display: none;
        }
        .tab-content-active {
            display: block;
        }
        .code-block {
            background-color: #1f2937;
            color: #d1d5db;
            border-radius: 0.5rem;
            padding: 1.5rem;
            overflow-x: auto;
            position: relative;
        }
        .copy-button {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background-color: #4b5563;
            color: #ffffff;
            border: none;
            border-radius: 0.375rem;
            padding: 0.5rem 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .copy-button:hover {
            background-color: #6b7280;
        }
        .alert-box {
            background-color: #fffbeb;
            border-left: 4px solid #facc15;
            padding: 1rem;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-4xl">

        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-900">Image Link Extractor Scripts</h1>
            <p class="mt-2 text-lg text-gray-600">A guide to different browser console tools</p>
        </header>

        <main class="bg-white rounded-lg shadow-md p-6 sm:p-8">
            <nav class="mb-6 border-b border-gray-200">
                <ul class="flex flex-wrap -mb-px">
                    <li class="mr-2">
                        <button class="tab-btn inline-block p-4 border-b-2 rounded-t-lg font-semibold" data-tab="overview">
                            <span class="mr-2">ðŸ“„</span>Overview
                        </button>
                    </li>
                    <li class="mr-2">
                        <button class="tab-btn inline-block p-4 border-b-2 rounded-t-lg font-semibold" data-tab="usage">
                            <span class="mr-2">ðŸš€</span>Usage Guide
                        </button>
                    </li>
                    <li class="mr-2">
                        <button class="tab-btn inline-block p-4 border-b-2 rounded-t-lg font-semibold" data-tab="code">
                            <span class="mr-2">ðŸ’»</span>The Code
                        </button>
                    </li>
                </ul>
            </nav>

            <div id="tab-content-container">
                <section id="overview" class="tab-content space-y-6">
                    <p class="text-gray-700">This page provides two JavaScript snippets designed to be run in your web browser's developer console. Each script is tailored to extract and clean image links from a specific type of webpage, and then copies the resulting links to your clipboard for easy use.</p>

                    <h2 class="text-2xl font-semibold text-gray-800 pt-4 border-t">How It Works</h2>
                    <p class="text-gray-700">The scripts differ in how they target the images on a webpage:</p>
                    <h3 class="text-xl font-semibold text-gray-800">Script 1: For Product Thumbnails</h3>
                    <ol class="list-decimal list-inside space-y-3 text-gray-700">
                        <li><strong>Finds Images by Class:</strong> This script searches for all images on the page that have specific, hard-coded CSS class attributes (e.g., `pdp-mod-common-image`).</li>
                        <li><strong>Cleans a Specific Substring:</strong> It then looks for a fixed part of the image URL, like `_120x120q80.jpg_.webp`, and removes it to give you a link to the main, higher-quality image.</li>
                        <li><strong>Logs and Copies:</strong> All the cleaned links are logged to the console and automatically copied to your clipboard.</li>
                    </ol>

                    <h3 class="text-xl font-semibold text-gray-800 pt-4 border-t">Script 2: For Product Details</h3>
                    <ol class="list-decimal list-inside space-y-3 text-gray-700">
                        <li><strong>Finds Images by Container:</strong> This more dynamic script first locates a specific section of the webpage using the CSS ID `#module_product_detail` to focus on the product image gallery.</li>
                        <li><strong>Uses a Dynamic Regex:</strong> It then uses a regular expression to intelligently remove the size and quality parameters (e.g., `_2200x2200q80.jpg_.webp`) from the URL. This makes it adaptable to different image sizes and file extensions like `.jpg` or `.png`.</li>
                        <li><strong>Logs and Copies:</strong> All the cleaned links are logged to the console and automatically copied to your clipboard.</li>
                    </ol>
                </section>

                <section id="usage" class="tab-content space-y-6">
                    <h2 class="text-2xl font-semibold text-gray-800">How to Use</h2>
                    <ol class="list-decimal list-inside space-y-4 text-gray-700">
                        <li>
                            <strong>Navigate to the Webpage:</strong> Open the webpage from which you want to extract image links in your browser.
                        </li>
                        <li>
                            <strong>Open Developer Tools:</strong>
                            <ul class="list-disc list-inside ml-4 mt-2 space-y-1">
                                <li><strong>Chrome/Firefox/Edge:</strong> Right-click anywhere and select "Inspect," then go to the "Console" tab.</li>
                                <li><strong>Safari:</strong> Enable the Develop menu (`Preferences > Advanced`), then select `Develop > Show JavaScript Console`.</li>
                            </ul>
                        </li>
                        <li>
                            <strong>Copy & Paste the Code:</strong> Go to "The Code" tab, select the script you need, copy it using the "Copy Code" button, and paste it into the console's input area.
                        </li>
                        <li>
                            <strong>Run the Script:</strong> Press `Enter`. The script will execute, showing logs in the console.
                        </li>
                        <li>
                            <strong>Download Images:</strong> Open IDM. Click "Task" on the top left corner. Select "Add batch download from clipboard". Click "Check all". Select "Main Download Queue" and click "Ok". Lastly click on "Start the queue" button and all images will be downloded.
                        </li>
                    </ol>
                    <div class="alert-box mt-6">
                        <h3 class="font-bold text-yellow-800">Note on Functionality</h3>
                        <p class="text-yellow-700 mt-1">This script focuses on extracting and copying image links. It does not automatically download images due to browser security limitations that require user interaction for each download.</p>
                    </div>
                </section>

                <section id="code" class="tab-content">
                    <p class="text-gray-700 mb-6">Below are two versions of the image extractor script, each tailored for a different page structure. Select the one that matches the page you are on.</p>

                    <h3 class="text-xl font-semibold text-gray-800 mb-2">Script 2: For Product Detail Image</h3>
                    <div class="code-block mb-8">
                        <button class="copy-button" data-target="code-snippet-v1">Copy Code</button>
                        <pre><code id="code-snippet-v1" class="language-javascript">// Dynamically targets detailed images and cleans URLs.
const selector = '#module_product_detail';
const container = document.querySelector(selector);

if (container) {
    const imgElements = container.querySelectorAll('img');
    const cleanedSrcLinks = [];
    const regexToRemove = /_\d+x\d+q\d+\.(jpg|png)_\.webp/g;

    imgElements.forEach(img => {
        let src = img.getAttribute('src');
        if (src) {
            const cleanedSrc = src.replace(regexToRemove, "");
            cleanedSrcLinks.push(cleanedSrc);
        }
    });

    console.log("Cleaned Image Links:");
    if (cleanedSrcLinks.length > 0) {
        cleanedSrcLinks.forEach(link => console.log(link));
        const linksToCopy = cleanedSrcLinks.join('\n');
        const tempTextArea = document.createElement('textarea');
        tempTextArea.value = linksToCopy;
        tempTextArea.style.position = 'fixed';
        tempTextArea.style.left = '-9999px';
        document.body.appendChild(tempTextArea);
        tempTextArea.select();
        document.execCommand('copy');
        document.body.removeChild(tempTextArea);
        console.log("Links copied to clipboard!");
    } else {
        console.log("No matching images found.");
    }
} else {
    console.log("Container not found:", selector);
}</div>
                </section>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const tabs = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');
            const copyButtons = document.querySelectorAll('.copy-button');

            function switchTab(tab) {
                tabs.forEach(t => {
                    t.classList.remove('tab-active');
                    t.classList.add('tab-inactive');
                    t.setAttribute('aria-selected', 'false');
                });
                tab.classList.add('tab-active');
                tab.classList.remove('tab-inactive');
                tab.setAttribute('aria-selected', 'true');

                tabContents.forEach(content => {
                    content.classList.remove('tab-content-active');
                });

                const activeTabContent = document.getElementById(tab.dataset.tab);
                if (activeTabContent) {
                    activeTabContent.classList.add('tab-content-active');
                }
            }

            tabs.forEach(tab => {
                tab.addEventListener('click', () => switchTab(tab));
            });

            copyButtons.forEach(copyBtn => {
                copyBtn.addEventListener('click', () => {
                    const targetId = copyBtn.dataset.target;
                    const codeSnippetElement = document.getElementById(targetId);

                    if (codeSnippetElement) {
                        const codeText = codeSnippetElement.textContent;

                        const tempTextArea = document.createElement('textarea');
                        tempTextArea.value = codeText;
                        document.body.appendChild(tempTextArea);
                        tempTextArea.select();
                        document.execCommand('copy');
                        document.body.removeChild(tempTextArea);

                        copyBtn.innerText = 'Copied!';
                        setTimeout(() => {
                            copyBtn.innerText = 'Copy Code';
                        }, 2000);
                    }
                });
            });

            // Set the first tab as active by default
            if (tabs.length > 0) {
                switchTab(tabs[0]);
            }
        });
    </script>
</body>
</html>
